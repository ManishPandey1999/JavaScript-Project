<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sort Table</title>
    <link rel="stylesheet" href="css/bootstrap5.min.css" />
    <script src="js/bootstrap5.bundle.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <style>
      body {
        height: 100vh;
        position: relative;
      }
      #maintable {
        width: 500px;
        height: 300px;
        overflow: scroll;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        -ms-overflow-style: none;
        scrollbar-width: thin;
      }
      #maintable::-webkit-scrollbar {
        display: none;
      }

      .table,
      tr,
      th,
      td {
        border: none;
      }
      thead tr th {
        cursor: pointer;
        position: relative;
        min-width: 250px;
        position: sticky;
        top: 0;
      }

      .sort-active::after {
        content: "\2193";
        position: absolute;
        margin-left: 7px;
      }

      thead tr th:nth-child(1) {
        position: sticky;
        left: 0;
        z-index: 11;
        min-width: 70px;
      }
      tbody tr td:nth-child(1) {
        position: sticky;
        left: 0;
        z-index: 1;
        background-color: #f8c9c9;
      }

      thead tr th:nth-child(3) {
        min-width: 130px;
      }

      thead tr th:nth-child(2) {
        position: sticky;
        left: 70px;
        z-index: 11;
        min-width: 130px;
      }
      tbody tr td:nth-child(2) {
        position: sticky;
        left: 70px;
        z-index: 1;
        background-color: #f8c9c9;
        min-width: 130px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Navbar</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="navbarDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Dropdown
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a
                class="nav-link disabled"
                href="#"
                tabindex="-1"
                aria-disabled="true"
                >Disabled</a
              >
            </li>
          </ul>
          <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>
    <div id="maintable" class="mx-3 my-5">
      <table class="table">
        <thead>
          <tr class="bg-secondary">
            <th class="bg-secondary text-white" scope="col">S No.</th>
            <th class="bg-secondary text-white" scope="col">Name</th>
            <th class="bg-secondary text-white" scope="col">Country</th>
            <th class="bg-secondary text-white" scope="col">Email</th>
            <th class="bg-secondary text-white" scope="col">Email</th>
            <th class="bg-secondary text-white" scope="col">Email</th>
            <th class="bg-secondary text-white" scope="col">Email</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td scope="row">1</td>
            <td>Mark</td>
            <td>Canada</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">2</td>
            <td>Jacob</td>
            <td>Germany</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">3</td>
            <td>Stark</td>
            <td>France</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">4</td>
            <td>Strange</td>
            <td>Amarica</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">5</td>
            <td>Monty</td>
            <td>England</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">6</td>
            <td>Mark</td>
            <td>Canada</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
            <td>markcanada@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">7</td>
            <td>Jacob</td>
            <td>Germany</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
            <td>jacobgernamy@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">8</td>
            <td>Stark</td>
            <td>France</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
            <td>starkfrance@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">9</td>
            <td>Strange</td>
            <td>Amarica</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
            <td>strangeamerica@gmail.com</td>
          </tr>
          <tr>
            <td scope="row">10</td>
            <td>Monty</td>
            <td>England</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
            <td>montyengland@gmail.com</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      // Add event listener to each table header
      document.querySelectorAll("thead th").forEach((header) => {
        header.addEventListener("click", () => {
          // Remove sort-active class from all headers
          document.querySelectorAll("thead th").forEach((header) => {
            header.classList.remove("sort-active");
            //$(this).append("<span>&#8595;</span>");
          });

          // Add sort-active class to the clicked header
          header.classList.add("sort-active");

          // Get the innerText of the clicked header
          const text = header.innerText.trim();

          // Toggle the direction of sorting
          const tbody = document.querySelector("tbody");
          const rows = Array.from(tbody.rows);
          const sortedRows = rows.sort((a, b) => {
            const cellA = a.cells[header.cellIndex].innerText.trim();
            const cellB = b.cells[header.cellIndex].innerText.trim();

            if (text === "Name") {
              return cellA > cellB ? 1 : -1;
            } else if (text === "S No.") {
              const numA = parseInt(cellA);
              const numB = parseInt(cellB);
              return numA > numB ? 1 : -1;
            } else if (text === "Country") {
              return cellA > cellB ? 1 : -1;
            } else if (text === "Email") {
              return cellA > cellB ? 1 : -1;
            } else {
              return 0;
            }
          });

          // Remove all existing rows from the table body
          tbody.innerHTML = "";

          // Add sorted rows back to the table body
          sortedRows.forEach((row) => {
            tbody.appendChild(row);
          });
        });
      });
    </script>
  </body>
</html>
